{% extends 'alllink.html' %}
{% load static %}
{% block title %} User all order {% endblock %}
{% block body %}

 <!-- Cart dropdown-->
{% for ps  in  orders %}

<div class="modal fade" id="pic{{forloop.counter}}" style="display: none;" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Order No - {{ps.adminnote}}</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
          </div>
          <div class="modal-body pb-0">
          {% for rs in shop  %}
          {% if rs.order_id == ps.id %}
            <!-- Item-->
            <div class="d-sm-flex justify-content-between mb-4 pb-3 pb-sm-2 border-bottom">
              <div class="media d-block d-sm-flex text-center text-sm-left"><a class="d-inline-block mx-auto mr-sm-4" href="#" style="width: 10rem;">
              {% if rs.variant.image_id > 0 %}
                  <img src="{{rs.variant.image_tag}}" alt="Product"></a>
                {% else %}
                  <img src="{{rs.product.image1.url}}" alt="Product"></a>
                {% endif %}
              
              
                <div class="media-body pt-2">
                  <h3 class="product-title font-size-base mb-2"><a href="shop-single-v1.html">{{rs.product.title}}</a></h3>
                  
                   {% if  rs.product.variant != 'None' %} 
                  <div class="font-size-sm"><span class="text-muted mr-2">Size:</span>{{rs.variant.size}}</div>
                  <div class="font-size-sm"><span class="text-muted mr-2">Color:</span>{{rs.variant.color}}</div>
                  {% endif %}
                  
                  <div class="font-size-lg text-accent pt-2">${{rs.price}}</div>
                </div>
              </div>
              <div class="pt-2 pl-sm-3 mx-auto mx-sm-0 text-center">
                <div class="text-muted mb-2">Quantity:</div>{{rs.quantity}}
              </div>
              <div class="pt-2 pl-sm-3 mx-auto mx-sm-0 text-center">
                <div class="text-muted mb-2">Subtotal</div>${{rs.amount}}
              </div>
            </div>
            <!-- Item-->
            {% endif %}

            {% endfor %}
          </div>
          <!-- Footer-->
          <div class="modal-footer flex-wrap justify-content-between bg-secondary font-size-md">
            <div class="px-2 py-1"><span class="text-muted">Subtotal:&nbsp;</span><span>${{ps.total}}</span></div>
            <div class="px-2 py-1"><span class="text-muted">Shipping:&nbsp;</span><span>$22.<small>50</small></span></div>
            <div class="px-2 py-1"><span class="text-muted">Tax:&nbsp;</span><span>$9.<small>50</small></span></div>
            <div class="px-2 py-1"><span class="text-muted">Total:&nbsp;</span><span class="font-size-lg">${{ps.total|add:"24"}}</small></span></div>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}

<!-- Page Title-->
<div class="page-title-overlap bg-dark pt-4">
    <div class="container d-lg-flex justify-content-between py-2 py-lg-3">
        <div class="order-lg-2 mb-3 mb-lg-0 pt-lg-2">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb breadcrumb-light flex-lg-nowrap justify-content-center justify-content-lg-start">
                    <li ><a class="text-nowrap" href="{% url 'home' %}"><i class="fa fa-home"></i>&nbsp;Home /&nbsp;</a></li>
                    <li class=" text-nowrap"><a href="{% url 'profile' %}">Account /&nbsp;</a>
                    </li>
                    <li>Order</li>
                </ol>
            </nav>
        </div>
        <div class="order-lg-1 pr-lg-4 text-center text-lg-left">
            <h1 class="h3 text-light mb-0">User Order</h1>
        </div>
    </div>
</div>
<!-- Page Content-->
<div class="container pb-5 mb-2 mb-md-3">
    <div class="row">
        <!-- Sidebar-->

        {% include 'link.html' %}

        <section class="col-lg-8">
            <!-- Toolbar-->
            <div class="d-flex justify-content-between align-items-center pt-lg-2 pb-4 pb-lg-5 mb-lg-3">
                <div class="form-inline">
                    <label class="text-light opacity-75 text-nowrap mr-2 d-none d-lg-block" >Sort orders:</label>
                    <select class="form-control"  name="status" onchange="this.form.submit();">
                      
                        <option> All</option>

                    </select>
                </form>


                </div><a class="btn btn-primary btn-sm d-none d-lg-inline-block" href="#"><i class="fa fa-sign-out mr-2"></i>Sign out</a>
            </div>

        <div class="table-responsive font-size-md ">
            <table class="table table-hover mb-0 ">
                <thead>
                <tr>
                    <th>Order Image</th>
                    <th>User Name</th>
                    <th>Status</th>
                    <th>Total</th>
                    <th>Shipping Code</th>

                </tr>
                </thead>
                <tbody>
                {% for ps in orders %}
                <tr>
                    <td class="py-3"><a class="nav-link-style font-weight-medium font-size-sm" href="#pic{{forloop.counter}}" data-toggle="modal">
                    {% if ps.status == 'New'%} Wait For Some time {% else %} {{ps.adminnote}} {% endif %}
                    {% comment %} {% if ps.variant.image_id > 0 %}
                    <img src="{{ps.variant.image_tag}}" alt="shop final product" style="width: 50px;">
                    {% else %}
                    <img src="{{ ps.product.image1.url}}" alt="shop final product" style="width:50px">
                    {% endif %}</a></td> {% endcomment %}
                    </td>
                    <td class="py-3">{{ps.create_at|date:"M d, Y"}}</td>
                    {% if ps.status == 'New' %}
                    <td class="py-3"><span class="badge badge-info m-0">{{ps.status}}</span></td>
                    {% elif ps.status == 'Preaparing' %}
                    <td class="py-3"><span class="badge badge-warning m-0">{{ps.status}}</span></td>
                    {% elif ps.status == 'Accepted' %}
                    <td class="py-3"><span class="badge badge-success m-0">{{ps.status}}</span></td>
                    {% else %}
                    <td class="py-3"><span class="badge badge-danger m-0">{{ps.status}}</span></td>
                    {% endif %}

                    <td class="py-3">${{ps.total}}</td>
                    <td class="py-3">{{ps.user.username}}</td>
                </tr>
                {% endfor %}

                </tbody>
            </table>

   
 
        </div>

                     <!-- Pagination -->
    <nav class="d-flex justify-content-center ">
      {% if orders.has_other_pages %}
        <ul class="pagination">
          {% if orders.has_previous %}
          <li class="page-item">
              <a href="?page={{ orders.previous_page_number }}" class="page-link">Previous</a>
          </li>
          {% else %}
          <li class="page-item disabled">
              <a href="" class="page-link"> Previous</a>
          </li>
          {% endif %}

          {% for i in orders.paginator.page_range %}
          {% if orders.number == i %}
          <li class="page-item active">
              <a href="" class="page-link"> {{i}}</a>
          </li>
          {% else %}
          <li class="page-item">
              <a href="?page={{i}}" class="page-link"> {{i}}</a>
          </li>
          {% endif %}
          {% endfor %}

          {% if orders.has_next %}
          <li class="page-item ">
              <a href="?page={{orders.next_page_number }}" class="page-link"> Next</a>
          </li>
          {% else %}

          <li class="page-item disabled">
              <a href="" class="page-link"> Next</a>
          </li>
          {% endif %}
      </ul>
      {% endif %}
    </nav>
        </section>
        <hr class="pb-4">
        <!-- Pagination--> 

    </div>
</div>



{% endblock %}